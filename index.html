<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPU-NVMe Impedance Mismatch - Documentation Series</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        :root {
            --primary: #8b5cf6;
            --primary-dark: #7c3aed;
            --gpu-green: #22c55e;
            --nvme-blue: #0ea5e9;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1e293b;
            --darker: #0f172a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.7;
            color: #e2e8f0;
            background: linear-gradient(135deg, #0f0a1a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            padding: 4rem 2rem;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(14, 165, 233, 0.2) 50%, rgba(34, 197, 94, 0.2) 100%);
            border-radius: 2rem;
            margin-bottom: 3rem;
            border: 1px solid rgba(139, 92, 246, 0.3);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 30%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 70% 70%, rgba(34, 197, 94, 0.1) 0%, transparent 50%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        header h1 {
            font-size: 3rem;
            color: white;
            margin-bottom: 1rem;
            text-shadow: 0 0 60px rgba(139, 92, 246, 0.5);
            position: relative;
            z-index: 1;
        }

        header .subtitle {
            font-size: 1.4rem;
            color: #c4b5fd;
            max-width: 800px;
            margin: 0 auto 2rem;
            position: relative;
            z-index: 1;
        }

        .badge-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .badge-gpu {
            background: rgba(34, 197, 94, 0.2);
            color: #86efac;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .badge-nvme {
            background: rgba(14, 165, 233, 0.2);
            color: #7dd3fc;
            border: 1px solid rgba(14, 165, 233, 0.3);
        }

        .badge-performance {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .intro-section {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 1.5rem;
            padding: 2.5rem;
            margin-bottom: 3rem;
            border: 1px solid rgba(139, 92, 246, 0.2);
            backdrop-filter: blur(10px);
        }

        .intro-section h2 {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .intro-section p {
            color: #cbd5e1;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .highlight {
            color: #fbbf24;
            font-weight: 600;
        }

        .key-stat {
            color: #c084fc;
            font-weight: 600;
        }

        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .chapter-card {
            background: rgba(30, 41, 59, 0.9);
            border-radius: 1.5rem;
            overflow: hidden;
            border: 1px solid rgba(100, 116, 139, 0.3);
            transition: all 0.3s ease;
            position: relative;
        }

        .chapter-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.3);
        }

        .chapter-header {
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .chapter-1 .chapter-header {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.3) 0%, rgba(22, 163, 74, 0.3) 100%);
        }

        .chapter-2 .chapter-header {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.3) 0%, rgba(2, 132, 199, 0.3) 100%);
        }

        .chapter-3 .chapter-header {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3) 0%, rgba(220, 38, 38, 0.3) 100%);
        }

        .chapter-4 .chapter-header {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.3) 0%, rgba(217, 119, 6, 0.3) 100%);
        }

        .chapter-5 .chapter-header {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.3) 0%, rgba(139, 92, 246, 0.3) 100%);
        }

        .chapter-6 .chapter-header {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.3) 0%, rgba(8, 145, 178, 0.3) 100%);
        }

        .chapter-7 .chapter-header {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.3) 0%, rgba(219, 39, 119, 0.3) 100%);
        }

        .chapter-8 .chapter-header {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.3) 0%, rgba(14, 165, 233, 0.3) 100%);
        }

        .chapter-number {
            font-size: 3rem;
            font-weight: bold;
            opacity: 0.3;
            position: absolute;
            top: 0.5rem;
            right: 1rem;
        }

        .chapter-1 .chapter-number { color: #22c55e; }
        .chapter-2 .chapter-number { color: #0ea5e9; }
        .chapter-3 .chapter-number { color: #ef4444; }
        .chapter-4 .chapter-number { color: #f59e0b; }
        .chapter-5 .chapter-number { color: #a855f7; }
        .chapter-6 .chapter-number { color: #06b6d4; }
        .chapter-7 .chapter-number { color: #ec4899; }
        .chapter-8 .chapter-number { color: #22c55e; }

        .chapter-title {
            color: white;
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .chapter-subtitle {
            color: #94a3b8;
            font-size: 0.95rem;
            position: relative;
            z-index: 1;
        }

        .chapter-content {
            padding: 1.5rem;
        }

        .chapter-topics {
            list-style: none;
            margin-bottom: 1.5rem;
        }

        .chapter-topics li {
            padding: 0.5rem 0;
            color: #cbd5e1;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            font-size: 0.95rem;
        }

        .chapter-topics li::before {
            content: 'â†’';
            color: var(--primary);
            font-weight: bold;
        }

        .chapter-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .chapter-link:hover {
            background: var(--primary-dark);
            transform: translateX(5px);
        }

        .stats-section {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(30, 41, 59, 0.9) 100%);
            border-radius: 1.5rem;
            padding: 2.5rem;
            margin-bottom: 3rem;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .stats-section h2 {
            color: white;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.6rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
        }

        .stat-card {
            text-align: center;
            padding: 1.5rem 1rem;
            border-radius: 1rem;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #c084fc 0%, #22d3ee 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .diagram-section {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 1.5rem;
            padding: 2.5rem;
            margin-bottom: 3rem;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .diagram-section h2 {
            color: white;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.6rem;
        }

        .sources-section {
            background: rgba(30, 41, 59, 0.6);
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(100, 116, 139, 0.2);
        }

        .sources-section h3 {
            color: white;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .sources-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .source-item {
            background: rgba(15, 23, 42, 0.5);
            padding: 1rem;
            border-radius: 0.75rem;
            border: 1px solid rgba(100, 116, 139, 0.2);
        }

        .source-item h4 {
            color: #c4b5fd;
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        .source-item p {
            color: #64748b;
            font-size: 0.85rem;
        }

        footer {
            text-align: center;
            padding: 3rem 2rem;
            color: #64748b;
            border-top: 1px solid rgba(100, 116, 139, 0.2);
        }

        footer a {
            color: #a5b4fc;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }
            
            .chapters-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ”¥ GPU-NVMe Impedance Mismatch</h1>
            <p class="subtitle">A comprehensive technical deep-dive into why modern GPUs struggle with NVMe storage protocols, and what needs to change</p>
            <div class="badge-container">
                <span class="badge badge-gpu">ðŸŽ® 270K+ GPU Threads</span>
                <span class="badge badge-nvme">ðŸ’¾ NVMe Protocol</span>
                <span class="badge badge-performance">âš¡ 32x Serialization</span>
            </div>
        </header>

        <section class="intro-section">
            <h2>ðŸ“– About This Documentation</h2>
            <p>As AI workloads demand ever-increasing data throughput, the mismatch between <span class="highlight">massively parallel GPU architectures</span> and <span class="highlight">CPU-optimized storage protocols</span> has become a critical bottleneck.</p>
            <p>This documentation series explores the fundamental architectural differences between GPUs and NVMe storage, quantifies the performance impact of protocol-level serialization, and discusses potential solutions including protocol evolution.</p>
            <p>Key insight: A modern GPU like the NVIDIA H200 can run <span class="key-stat">270,000+ concurrent threads</span>, but NVMe's doorbell mechanism serializes these down to <span class="key-stat">single-threaded writes</span>, creating a <span class="key-stat">32x or greater slowdown</span> per warp.</p>
        </section>

        <section class="stats-section">
            <h2>ðŸ“Š The Numbers Tell the Story</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">270K</div>
                    <div class="stat-label">GPU Threads (H200)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">32</div>
                    <div class="stat-label">Threads per Warp</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">65K</div>
                    <div class="stat-label">Max NVMe Queues</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">1</div>
                    <div class="stat-label">Doorbell per Queue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">32x</div>
                    <div class="stat-label">Warp Slowdown</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">100M</div>
                    <div class="stat-label">Target IOPS</div>
                </div>
            </div>
        </section>

        <div class="chapters-grid">
            <!-- Chapter 1 -->
            <article class="chapter-card chapter-1">
                <div class="chapter-header">
                    <span class="chapter-number">01</span>
                    <h3 class="chapter-title">GPU Threading Model</h3>
                    <p class="chapter-subtitle">Understanding SIMT architecture and warp execution</p>
                </div>
                <div class="chapter-content">
                    <ul class="chapter-topics">
                        <li>Thread blocks, warps, and SMs</li>
                        <li>SIMT execution model</li>
                        <li>Warp scheduling and latency hiding</li>
                        <li>Memory hierarchy (registers, shared, global)</li>
                        <li>Why GPUs excel at parallelism</li>
                    </ul>
                    <a href="chapter1_gpu_threading/index.html" class="chapter-link">
                        Read Chapter 1 â†’
                    </a>
                </div>
            </article>

            <!-- Chapter 2 -->
            <article class="chapter-card chapter-2">
                <div class="chapter-header">
                    <span class="chapter-number">02</span>
                    <h3 class="chapter-title">NVMe & RDMA Queues</h3>
                    <p class="chapter-subtitle">Circular queue architecture for storage</p>
                </div>
                <div class="chapter-content">
                    <ul class="chapter-topics">
                        <li>Submission and Completion Queue pairs</li>
                        <li>Phase bit mechanism</li>
                        <li>Doorbell registers and MMIO</li>
                        <li>RDMA queue comparison</li>
                        <li>Multi-queue scaling challenges</li>
                    </ul>
                    <a href="chapter2_queues/index.html" class="chapter-link">
                        Read Chapter 2 â†’
                    </a>
                </div>
            </article>

            <!-- Chapter 3 -->
            <article class="chapter-card chapter-3">
                <div class="chapter-header">
                    <span class="chapter-number">03</span>
                    <h3 class="chapter-title">Doorbell Serialization</h3>
                    <p class="chapter-subtitle">The critical GPU-NVMe bottleneck</p>
                </div>
                <div class="chapter-content">
                    <ul class="chapter-topics">
                        <li>The fundamental mismatch quantified</li>
                        <li>CPU vs GPU I/O patterns</li>
                        <li>Five serialization points</li>
                        <li>32x warp slowdown analysis</li>
                        <li>Path forward: protocol evolution</li>
                    </ul>
                    <a href="chapter3_doorbell/index.html" class="chapter-link">
                        Read Chapter 3 â†’
                    </a>
                </div>
            </article>

            <!-- Chapter 4 -->
            <article class="chapter-card chapter-4">
                <div class="chapter-header">
                    <span class="chapter-number">04</span>
                    <h3 class="chapter-title">CPU vs GPU I/O Comparison</h3>
                    <p class="chapter-subtitle">Fundamental architectural differences</p>
                </div>
                <div class="chapter-content">
                    <ul class="chapter-topics">
                        <li>CPU thread model vs GPU SIMT</li>
                        <li>Interrupt handling differences</li>
                        <li>Queue access contention patterns</li>
                        <li>Context switching overhead</li>
                        <li>Performance metrics comparison</li>
                    </ul>
                    <a href="chapter4_cpu_vs_gpu/index.html" class="chapter-link">
                        Read Chapter 4 â†’
                    </a>
                </div>
            </article>

            <!-- Chapter 5 -->
            <article class="chapter-card chapter-5">
                <div class="chapter-header">
                    <span class="chapter-number">05</span>
                    <h3 class="chapter-title">Data Paths & Topology</h3>
                    <p class="chapter-subtitle">GPU-to-SSD data flow architectures</p>
                </div>
                <div class="chapter-content">
                    <ul class="chapter-topics">
                        <li>Traditional CPU bounce buffer path</li>
                        <li>GPUDirect peer-to-peer transfers</li>
                        <li>PCIe switch topologies</li>
                        <li>Control path vs data path</li>
                        <li>AI training/inference configurations</li>
                    </ul>
                    <a href="chapter5_data_paths/index.html" class="chapter-link">
                        Read Chapter 5 â†’
                    </a>
                </div>
            </article>

            <!-- Chapter 6 -->
            <article class="chapter-card chapter-6">
                <div class="chapter-header">
                    <span class="chapter-number">06</span>
                    <h3 class="chapter-title">NVMe Queue Operations</h3>
                    <p class="chapter-subtitle">Deep dive into submission/completion</p>
                </div>
                <div class="chapter-content">
                    <ul class="chapter-topics">
                        <li>NVMe command structure (64 bytes)</li>
                        <li>Submission queue management</li>
                        <li>Completion queue processing</li>
                        <li>Phase bit protocol</li>
                        <li>Head/tail pointer semantics</li>
                    </ul>
                    <a href="chapter6_nvme_queue_ops/index.html" class="chapter-link">
                        Read Chapter 6 â†’
                    </a>
                </div>
            </article>

            <!-- Chapter 7 -->
            <article class="chapter-card chapter-7">
                <div class="chapter-header">
                    <span class="chapter-number">07</span>
                    <h3 class="chapter-title">The Synchronization Tax</h3>
                    <p class="chapter-subtitle">Quantifying GPU overhead from NVMe</p>
                </div>
                <div class="chapter-content">
                    <ul class="chapter-topics">
                        <li>Five serialization points identified</li>
                        <li>Command ID allocation contention</li>
                        <li>Doorbell write serialization</li>
                        <li>Completion polling overhead</li>
                        <li>SM utilization impact analysis</li>
                    </ul>
                    <a href="chapter7_sync_tax/index.html" class="chapter-link">
                        Read Chapter 7 â†’
                    </a>
                </div>
            </article>

            <!-- Chapter 8 -->
            <article class="chapter-card chapter-8">
                <div class="chapter-header">
                    <span class="chapter-number">08</span>
                    <h3 class="chapter-title">Solutions & Future</h3>
                    <p class="chapter-subtitle">Protocol evolution for GPU-native storage</p>
                </div>
                <div class="chapter-content">
                    <ul class="chapter-topics">
                        <li>NVMe protocol revision proposals</li>
                        <li>Warp-aligned queue designs</li>
                        <li>Hardware-assisted completion</li>
                        <li>GPU-aware queue arbitration</li>
                        <li>Industry roadmap and timeline</li>
                    </ul>
                    <a href="chapter8_solutions/index.html" class="chapter-link">
                        Read Chapter 8 â†’
                    </a>
                </div>
            </article>
        </div>

        <section class="diagram-section">
            <h2>ðŸ”„ The Impedance Mismatch Visualized</h2>
            <div id="overview-diagram"></div>
        </section>

        <section class="sources-section">
            <h3>ðŸ“š Technical Sources</h3>
            <div class="sources-list">
                <div class="source-item">
                    <h4>ECE408 Lectures (UIUC)</h4>
                    <p>Applied Parallel Programming course materials covering CUDA, memory models, and GPU optimization</p>
                </div>
                <div class="source-item">
                    <h4>Industry Analysis</h4>
                    <p>"Why does NVMe need to evolve for efficient storage access from GPUs?" - Industry Technology</p>
                </div>
                <div class="source-item">
                    <h4>NVMe Specification</h4>
                    <p>NVM Express Base Specification covering queue architecture and doorbell mechanisms</p>
                </div>
                <div class="source-item">
                    <h4>NVIDIA Documentation</h4>
                    <p>CUDA Programming Guide, GPUDirect Storage, and architecture whitepapers</p>
                </div>
            </div>
        </section>

        <!-- Credits Section -->
        <section class="sources-section" style="margin-top: 2rem;">
            <h2>ðŸ“œ Credits & References</h2>
            <div class="source-grid">
                <div class="source-item" style="grid-column: span 2;">
                    <h4>Primary Source</h4>
                    <p><strong>"Why does NVMe need to evolve for efficient storage access from GPUs?"</strong></p>
                    <p style="margin-top: 0.5rem; color: #94a3b8;">
                        <strong>Authors:</strong> Chandra Guda (SMTS), Suresh Rajgopal (DMTS), Pierre Labat (SMTS)<br>
                        <strong>Organization:</strong> Micron Technology<br>
                        <strong>Presented at:</strong> SNIA Developer Conference (SDC25)<br>
                        <strong>Location:</strong> Hyatt Regency Santa Clara, CA<br>
                        <strong>Date:</strong> September 15-17, 2025
                    </p>
                </div>
                <div class="source-item">
                    <h4>ECE408 Course Materials</h4>
                    <p>Applied Parallel Programming, University of Illinois at Urbana-Champaign</p>
                    <p style="margin-top: 0.5rem; color: #94a3b8;">David Kirk (NVIDIA), Wen-mei W. Hwu, Volodymyr Kindratenko, Steven S. Lumetta</p>
                </div>
            </div>
        </section>

        <footer>
            <p>GPU-NVMe Impedance Mismatch Documentation Series</p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                Â© 2025 SNIA Developer Conference. All Rights Reserved. | Â© Micron Technology
            </p>
            <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #64748b;">
                Documentation compiled for educational and technical reference purposes.
            </p>
        </footer>
    </div>

    <script type="text/babel">
        const OverviewDiagram = () => {
            return (
                <svg viewBox="0 0 900 400" style={{width: '100%', maxWidth: '900px', margin: '0 auto', display: 'block'}}>
                    {/* Background */}
                    <defs>
                        <linearGradient id="gpuGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stopColor="rgba(34, 197, 94, 0.3)"/>
                            <stop offset="100%" stopColor="rgba(22, 163, 74, 0.1)"/>
                        </linearGradient>
                        <linearGradient id="nvmeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stopColor="rgba(14, 165, 233, 0.3)"/>
                            <stop offset="100%" stopColor="rgba(2, 132, 199, 0.1)"/>
                        </linearGradient>
                        <linearGradient id="bottleneckGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" stopColor="#ef4444"/>
                            <stop offset="100%" stopColor="#dc2626"/>
                        </linearGradient>
                    </defs>
                    
                    {/* GPU Section */}
                    <g transform="translate(50, 40)">
                        <rect width="300" height="300" fill="url(#gpuGrad)" rx="16" stroke="#22c55e" strokeWidth="2"/>
                        <text x="150" y="35" textAnchor="middle" fill="#22c55e" fontWeight="bold" fontSize="18">GPU</text>
                        <text x="150" y="55" textAnchor="middle" fill="#86efac" fontSize="12">270,000+ Concurrent Threads</text>
                        
                        {/* SM Grid */}
                        <g transform="translate(20, 70)">
                            {[...Array(6)].map((_, row) => (
                                [...Array(6)].map((_, col) => (
                                    <g key={`${row}-${col}`} transform={`translate(${col * 43}, ${row * 35})`}>
                                        <rect width="38" height="30" fill="rgba(34, 197, 94, 0.4)" rx="4" stroke="#22c55e" strokeWidth="1"/>
                                        <text x="19" y="12" textAnchor="middle" fill="#86efac" fontSize="7">SM</text>
                                        <text x="19" y="23" textAnchor="middle" fill="#4ade80" fontSize="6">2048t</text>
                                    </g>
                                ))
                            ))}
                        </g>
                        
                        <text x="150" y="290" textAnchor="middle" fill="#64748b" fontSize="10">
                            132 SMs Ã— 2048 threads = 270K parallel execution units
                        </text>
                    </g>
                    
                    {/* Bottleneck Funnel */}
                    <g transform="translate(380, 80)">
                        <path d="M 0 0 L 140 0 L 100 220 L 40 220 Z" fill="rgba(239, 68, 68, 0.2)" stroke="#ef4444" strokeWidth="2"/>
                        <text x="70" y="60" textAnchor="middle" fill="white" fontWeight="bold" fontSize="14">SERIALIZE</text>
                        <text x="70" y="85" textAnchor="middle" fill="#fca5a5" fontSize="11">Doorbell</text>
                        <text x="70" y="105" textAnchor="middle" fill="#fca5a5" fontSize="11">Bottleneck</text>
                        
                        {/* Metrics */}
                        <g transform="translate(20, 130)">
                            <rect width="100" height="70" fill="rgba(239, 68, 68, 0.3)" rx="6"/>
                            <text x="50" y="20" textAnchor="middle" fill="white" fontSize="10">Per Warp:</text>
                            <text x="50" y="40" textAnchor="middle" fill="#f87171" fontWeight="bold" fontSize="16">32x</text>
                            <text x="50" y="55" textAnchor="middle" fill="#fca5a5" fontSize="9">slowdown</text>
                        </g>
                    </g>
                    
                    {/* Arrows */}
                    <defs>
                        <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                        </marker>
                        <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
                        </marker>
                        <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#0ea5e9"/>
                        </marker>
                    </defs>
                    
                    <line x1="350" y1="190" x2="375" y2="190" stroke="#22c55e" strokeWidth="3" markerEnd="url(#arrowGreen)"/>
                    <line x1="525" y1="190" x2="550" y2="190" stroke="#ef4444" strokeWidth="3" markerEnd="url(#arrowRed)"/>
                    
                    {/* NVMe Section */}
                    <g transform="translate(550, 40)">
                        <rect width="300" height="300" fill="url(#nvmeGrad)" rx="16" stroke="#0ea5e9" strokeWidth="2"/>
                        <text x="150" y="35" textAnchor="middle" fill="#0ea5e9" fontWeight="bold" fontSize="18">NVMe SSD</text>
                        <text x="150" y="55" textAnchor="middle" fill="#7dd3fc" fontSize="12">Queue-Based Protocol</text>
                        
                        {/* Queue pairs */}
                        <g transform="translate(30, 70)">
                            {[...Array(4)].map((_, row) => (
                                [...Array(3)].map((_, col) => (
                                    <g key={`${row}-${col}`} transform={`translate(${col * 80}, ${row * 50})`}>
                                        <rect width="70" height="40" fill="rgba(14, 165, 233, 0.3)" rx="6" stroke="#0ea5e9"/>
                                        <text x="35" y="18" textAnchor="middle" fill="#7dd3fc" fontSize="9">QP {row * 3 + col}</text>
                                        <rect x="10" y="25" width="20" height="10" fill="#0ea5e9" rx="2"/>
                                        <rect x="40" y="25" width="20" height="10" fill="#a855f7" rx="2"/>
                                    </g>
                                ))
                            ))}
                        </g>
                        
                        <text x="150" y="285" textAnchor="middle" fill="#64748b" fontSize="10">
                            1 doorbell per queue = serialization point
                        </text>
                    </g>
                    
                    {/* Bottom summary */}
                    <g transform="translate(50, 360)">
                        <rect width="800" height="35" fill="rgba(139, 92, 246, 0.2)" rx="8"/>
                        <text x="400" y="23" textAnchor="middle" fill="white" fontSize="13">
                            <tspan fill="#22c55e" fontWeight="bold">270,000 threads</tspan>
                            <tspan fill="#94a3b8"> â†’ </tspan>
                            <tspan fill="#ef4444" fontWeight="bold">serialized doorbells</tspan>
                            <tspan fill="#94a3b8"> â†’ </tspan>
                            <tspan fill="#0ea5e9" fontWeight="bold">~100 active queues</tspan>
                            <tspan fill="#94a3b8"> = </tspan>
                            <tspan fill="#f87171" fontWeight="bold">massive contention!</tspan>
                        </text>
                    </g>
                </svg>
            );
        };

        ReactDOM.render(<OverviewDiagram />, document.getElementById('overview-diagram'));
    </script>
</body>
</html>
